<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huacainfo.ace.fop.dao.report.Portal">
    <select id="query" resultType="map">
    SELECT
        'person' id,
    count(1) 'value'
    FROM
    portal.department
    union alls
    SELECT
    'user' id,
    count(1) 'value'
    FROM
    portal.users where syid='fop'
    union all
    SELECT
    'resources' id,
    count(1) 'value'
    FROM
    portal.resources where syid='fop'
  </select>

    <select id="portalCount" resultType="java.util.Map" parameterType="java.lang.String">
        select
        r.cCount + r.aCount as companyCount,
        r.mcCount + r.maCount as memberCount,
        iCount as infoCount
        from (
        SELECT
        (
        SELECT count(1) FROM fop.fop_company c
        WHERE c.companyType in ('0','2','3','4')
        and c.`status` IN ('1','2')
        ) AS cCount,
        ( SELECT count(1) FROM fop.fop_association a WHERE a.`status` IN ('1','2') ) AS aCount,
        (
        SELECT count(1)
        FROM fop.fop_company c
        WHERE c.companyType in ('0','2','3','4')
        and c.`status` IN ('2')
        ) AS mcCount,
        (SELECT count(1) FROM fop.fop_association a WHERE a.`status` IN ('1','2') ) AS maCount,
        (SELECT count(1) FROM fop.information_service) AS iCount
        FROM
        fop.fop_company t
        LIMIT 1
        ) r
    </select>
</mapper>