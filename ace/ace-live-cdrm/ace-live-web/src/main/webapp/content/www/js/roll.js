!function(t){var i=function(t,i,a){"object"==typeof t?this.obj=t:this.obj=$("#"+t),this.ulObj=$("<ul></ul>"),this.ulObj.css("position","absolute"),this.obj.append(this.ulObj),i&&(this.callback=i),a&&(this.tapCallback=a),this.init()};i.prototype={init:function(){this.barLen=0,this.barIndex=0,this.swipe()},reset:function(){this.ulObj.html(""),this.ulObj.css("left",0),this.barLen=0,this.barIndex=0,this.callback&&this.callback(this.barIndex,this.barLen)},appendimg:function(t){function i(t,i){if(a.barWidth/a.barHeight>=i.width/i.height)$(i).height(a.barHeight).css({display:"block",margin:"auto"});else{var e=a.barWidth*i.height/i.width,h=(a.barHeight-e)/2;$(i).width(a.barWidth).css("margin-top",h)}t.width(a.barWidth).append(i)}var a=this;$.each(t,function(){var t=$('<li style="float:left;width:'+$(window).width()+'px;" data-src="'+this+'"></li>');a.ulObj.append(t);var e=new Image;e.src=this,e.complete?i(t,e):e.onload=e.onerror=function(){i(t,e)}})},show:function(t,i){this.reset(),this.barWidth=this.obj.width(),this.barHeight=this.obj.height(),this.barLen=t.length,this.ulObj.width(this.barWidth*this.barLen),this.appendimg(t),i&&(this.barIndex=i,this.ulObj.css("left",-this.barIndex*this.barWidth)),this.callback&&this.callback(this.barIndex,this.barLen)},swipe:function(){var t=this;t.tapReady=!0,new sugar.swipe(t.obj,{start:function(i){t.tapReady=!0},move:function(i){"x"==i.swipeState&&t.ulObj.css("left",-t.barIndex*t.barWidth+i.moveX),t.tapReady=!1},end:function(i){if("x"==i.swipeState){i.moveX>0?t.barIndex--:i.moveX<0&&t.barIndex++,t.barIndex<0?t.barIndex=0:t.barIndex>=t.barLen&&(t.barIndex=t.barLen-1);var a=-t.barIndex*t.barWidth;t.ulObj.animate({left:a},300,function(){i.finish(),t.tapReady&&t.tapCallback()}),t.callback&&t.callback(t.barIndex,t.barLen)}else i.finish(),t.tapReady&&t.tapCallback()}},{swipeX:!0})}},sugar[t]=i}("roll-1.0.0");