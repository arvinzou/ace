var _colNames = ['', '编码', '产品编码', '问题描述', '原因分析', '改善措施', '责任人', '所属部门',		'任务类型', '完成日期', '任务状态', ''];var _colModel = function() {    /*判断是否有关闭任务的权限*/    var edit=false;    if($.inArray("4", userProp.roleType)!=-1){        edit=true;    }	return [			{				name : 'myac',				editable : false,				width : 80,				fixed : true,				sortable : false,				frozen : false,				resize : false,				formatter : 'actions',				formatoptions : {					keys : false,					onSuccess : function(xhr) {						var rep = xhr.responseJSON;						if (rep.state) {							reload();						} else {							alert(rep.errorMessage);							return false;						}						return true;					},					onError : function() {						alert("请求失败，请检测网络情况。");						return true;					}				}			},			{				name : 'id',				editable : false,				hidden : true,				width : 100,				editoptions : {					size : "20",					maxlength : "50"				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : false				}			},			{				name : 'productId',				editable : edit,				width : 100,				editoptions : {					size : "20",					maxlength : "50"				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'></span>"				},				editrules : {					required : false				}			},			{				name : 'probDiscri',				editable : edit,				width : 100,				editoptions : {					size : "20",					maxlength : "50",					readOnly : false				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : true				},                                   renderer : function(value) {                                       var text=value;                                       text=text.replace(/\b(\S+)\b/g,function($0) {                                           if (typeof $0 !== 'undefined') {                                               return $0+ '';                                           }                                       }).replace(/\s+/g,'<br/>')                                       return text;                                   }			},			{				name : 'probAnsys',				editable : true,				edittype : "textarea",				width : 100,				editoptions : {					size : "20",					maxlength : "200",					style : "width:90%;height:50px",					colspan : true				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : false				},                  renderer : function(value) {                      var text=value;                      text=text.replace(/\b(\S+)\b/g,function($0) {                          if (typeof $0 !== 'undefined') {                              return $0+ '';                          }                      }).replace(/\s+/g,'<br/>')                      return text;                  }			},			{				name : 'actions',				editable : true,				edittype : "textarea",				width : 100,				editoptions : {					size : "20",					maxlength : "200",					style : "width:90%;height:50px",					colspan : true				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : false				},                                  renderer : function(value) {                                      var text=value;                                      text=text.replace(/\b(\S+)\b/g,function($0) {                                          if (typeof $0 !== 'undefined') {                                              return $0+ '';                                          }                                      }).replace(/\s+/g,'<br/>')                                      return text;                                  }			},			{				name : 'liable',				editable : edit,				width : 100,				edittype : "combogrid",				sorttype : "int",				dataoptions : {					panelWidth : 400,					idField : 'USER_ID',					textField : 'NAME',					url : portalPath + '/system/selectUsers.do',					mode : 'remote',					fitColumns : true,					method : 'get',					columns : [[{						field : 'USER_ID',						title : '用户编号',						width : 100					}, {						field : 'NAME',						title : '姓名',						width : 100					}, {						field : 'DEPARTMENT_NAME',						title : '部门',						width : 100					}]]				},				editoptions : {					style : 'height:25px'				},				renderer : function(value, cur) {					return $.jgrid.getAccessor(cur, 'userName');				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : true				}			},			{				name : 'deptId',				//width : 150,				editable : false,				edittype : "combotree",				dataoptions : {					url : portalPath + '/system/selectDepartmentTreeList.do',					animate : true,					lines : false				},				editoptions : {					style : 'width:175px;line-height: 25px;height: 25px;'				},				renderer : function(value, cur) {					return $.jgrid.getAccessor(cur, 'deptName');				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : true				}			},			{				name : 'category',				editable : edit,				width : 100,				editoptions : {					size : "20",					maxlength : "50"				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : true				},				edittype : "select",				renderer : function(value) {					return rsd(value, "105");				},				editoptions : {					value : odparse("105")				}			},			{				name : 'lastModifyDate',				editable : edit,				width : 100,				editoptions : {					size : "20",					maxlength : "50"				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'></span>"				},				editrules : {					required : false				},				edittype : "datebox",				editoptions : {					style : 'height:25px'				},				renderer : function(value) {					return value.substr(0, 10);				}			},			{				name : 'status',				editable : edit,				width : 100,				editoptions : {					size : "20",					maxlength : "50"				},				formoptions : {					elmprefix : "",					elmsuffix : "<span style='color:red;font-size:16px;font-weight:800'>*</span>"				},				editrules : {					required : true				},				edittype : "select",				renderer : function(value) {					return rsd(value, "92");				},				editoptions : {					value : odparse("92")				},				cellattr : function(rowId, val, rawObject, cm, rdata) {					if (rawObject.status == '1') {						return "style='background:red'";					}					if (rawObject.status == '2') {						return "style='background:green'";					}					if (rawObject.status == '3') {						return "style='background:#F9F900'";					}					if (rawObject.status == '4') {						return "style='background:#FF9224'";					}				}			}, {				name : 'userName',				editable : false,				hidden : true,				width : 100			}];}function aceSwitch(cellvalue, options, cell) {	console.log('aceSwitch');	setTimeout(function() {		$(cell).find('input[type=checkbox]').addClass(				'ace ace-switch ace-switch-5').after(				'<span class="lbl"></span>');	}, 0);}// enable datepickerfunction pickDate(cellvalue, options, cell) {	setTimeout(function() {		$(cell).find('input[type=text]').datepicker({			format : 'yyyy-mm-dd',			autoclose : true		});	}, 0);}function renderBtn(cur) {	var id = $.jgrid.getAccessor(cur, 'id');	var title = $.jgrid.getAccessor(cur, 'name');	var html = [];	html.push('<a target="_blank" href="');	html.push('javascript:preview(\'' + id + '\',\'' + title + '\')');	html.push('"');	html.push('><span class="badge badge-info">编辑</span></a>');	return html.join(' ');}